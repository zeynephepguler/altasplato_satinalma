@{
    ViewData["Title"] = "Depo";
}
@* Uncomment this line if you intend to use a specific layout *@
@* @{
    Layout = "~/Views/Shared/_LayoutS.cshtml";
} *@
@Html.Partial("_SASidebar")

<div class="container mt-5">
    <h2 class="text-center">Depoya Ürün Ekle</h2>

    <form asp-action="DepoUrunEkleSayim" method="post" class="form-horizontal" enctype="multipart/form-data">
        <!-- Product Selection -->
        <div class="mb-3">
            <label for="UrunAdi" class="form-label">Ürün Adı</label>
            <select class="form-control" id="UrunAdi" name="UrunAdi" required>
                <option value="" disabled selected>Seçiniz</option>

                @foreach (var urun in ViewBag.UrunList)
                    {
                        if (urun != null)
                        {
                        <option value="@urun.UrunAdi"
                                data-toplamadet="@urun.ToplamAdet"
                                 data-kategori="@urun.Kategori">
                            @urun.UrunAdi
                        </option>
                        }
                    }
                }
                 
            </select>

        </div>

        <!-- Supplier and Product Details -->
        <div class="mb-3">
             <input type="hidden" class="form-control" id="TedarikciId" name="TedarikciAdi">
        </div>

        <!-- Category Selection -->
        <div class="mb-3">
             <input type="hidden" id="productCategory" name="Kategori" required>
               


        </div>

        <div class="mb-3">
            <input type="hidden"  class="form-control" id="BirimFiyat" name="BirimFiyat" value="0">
        </div>

        <!-- Product Quantity -->
       
        <!-- Date Fields -->
        <div class="mb-3">
            <label for="SiparisOnayTarihi" class="form-label">Sayım Onay Tarihi</label>
            <input type="date" class="form-control" id="SiparisOnayTarihi" name="SiparisOnayTarihi" >
        </div>

        <div class="mb-3">
             <input type="hidden" class="form-control" id="SiparisTerminTarihi" name="SiparisTerminTarihi" value="@DateTime.Now" >
        </div>

        <div class="mb-3">
             <input type="hidden" class="form-control" id="UrunGelisTarihi" name="UrunGelisTarihi" value="@DateTime.Now" required>
        </div>
        <div class="mb-3">
            <label for="SiparisUrunAdedi" class="form-label">Toplam Urun Miktarı</label>
            <input type="text" class="form-control" id="SiparisUrunAdedi" name="SiparisUrunAdedi">
        </div>
        <div class="mb-3">
            <label for="GelenUrunMiktari" class="form-label">Eklenecek/Çıkarılacak Ürün Miktarı</label>
            <input type="number" class="form-control" id="GelenUrunMiktari" name="GelenUrunMiktari" required>
        </div>
        <!-- Additional Fields -->
        <div class="mb-3">
             <input type="hidden" class="form-control" id="KontrolEden" name="KontrolEden" value="Satın Alma - Sayim">
        </div>
        <div class="mb-3">
             <input type="hidden" class="form-control" id="Konum" name="Konum" value="Sayim">
        </div>
        <div class="mb-3">
            <label for="Aciklama" class="form-label">Açıklama :</label>
            <input type="text" class="form-control" id="Aciklama" name="Aciklama" placeholder="Sayımın durumunu belirtiniz." requred>
        </div>
        <div class="mb-3">
            <input type="hidden" class="form-control" id="SiparisID" name="SiparisID" value="0">
        </div>
        <div class="mb-3">
            <label for="Karar" class="form-label">Karar</label>
            <input type="hidden" id="Karar" name="Karar" value="Sayim" required>
               
        </div>
        <label for="Foto">Fotoğraf Yükle:</label>
        <input type="file" name="Foto" id="Foto" accept="image/*" />
        <!-- Submit Button -->
        <div class="text-center">
            <button type="submit" class="btn btn-primary">Ürün Ekle</button>
        </div>
    </form>
</div>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const urunSelect = document.getElementById("UrunAdi");
         const toplamAdetInput = document.getElementById("SiparisUrunAdedi");
        const kategoriInput = document.getElementById("productCategory");

        urunSelect.addEventListener("change", function () {
            const selectedOption = this.options[this.selectedIndex];

             toplamAdetInput.value = selectedOption.getAttribute("data-toplamadet") || "";
            kategoriInput.value = selectedOption.getAttribute("data-kategori") || "";
        });
    });
</script>
